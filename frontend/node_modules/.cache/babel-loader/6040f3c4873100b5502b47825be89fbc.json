{"ast":null,"code":"var _jsxFileName = \"/Users/alexrutledge/Documents/GitHub Local/cop4331-helpinghand/frontend/src/components/accesscodepage/acesscodepage.js\";\nimport React, { useState } from \"react\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport TaskCard from '../taskcard/taskcard.js';\nimport Grid from '@material-ui/core/Grid';\nimport Appbar from \"../appbar/appbar.js\";\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport { useLocation } from \"react-router-dom\";\nimport axios from 'axios';\nimport { connect } from \"react-redux\";\nimport { setAreas } from '../../redux/actions.js';\nimport { useHistory } from \"react-router-dom\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    marginTop: 40\n  },\n  button: {\n    marginTop: '40px',\n    width: '110px',\n    height: '40px',\n    backgroundColor: \"#27AE60\",\n    color: '#FFFFFF'\n  }\n}));\n\nfunction AccessCodePage(props) {\n  const classes = useStyles();\n  const location = useLocation();\n  let history = useHistory();\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n    var obj = {\n      email: email,\n      password: password\n    };\n    var js = JSON.stringify(obj);\n    console.log(obj);\n\n    try {\n      if (location.state.role == 'Coordinator') {\n        const options = {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: js\n        };\n        let response = await fetch('http://localhost:3000/api/coordLogin', options).then(data => {\n          if (!data.ok) {\n            throw Error(data.status);\n          }\n\n          return data.json();\n        }).catch(e => {\n          console.log(e);\n        });\n        console.log(response);\n\n        if (response.id == -1) {\n          setMessage('Email/password combination is incorrect');\n        } else {\n          var user = {\n            firstName: response.firstName,\n            lastName: response.lastName,\n            id: response.id\n          };\n          localStorage.setItem('user_data', JSON.stringify(user));\n          setMessage('');\n          history.push('/coordinatorPage');\n        }\n      } else {\n        const response = fetch('http://localhost:3000/api/volLogin', {\n          method: 'POST',\n          body: js,\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n        var res = JSON.parse(response.text());\n\n        if (res.id <= 0) {\n          setMessage('Email/password combination is incorrect');\n        } else {\n          var user = {\n            firstName: res.firstName,\n            lastName: res.lastName,\n            id: res.id\n          };\n          localStorage.setItem('user_data', JSON.stringify(user));\n          setMessage('');\n          window.location.href = '/areas';\n        }\n      }\n    } catch (e) {\n      alert(e.toString());\n      return;\n    }\n\n    axios.get('/event/' + location.state.role + \"/\" + email).then(response => {\n      console.log(\"Reponse:\", response);\n      props.areaAction(response.data.areas);\n      history.push(\"/areas\");\n    }).catch(error => {\n      console.log(\"Get Event Error:\", error);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Appbar, {\n    title: location.state.role,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    direction: \"column\",\n    justify: \"center\",\n    alignItems: \"center\",\n    className: classes.root,\n    spacing: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h4\",\n    component: \"h3\",\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 17\n    }\n  }, location.state.role + \" Login\"))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    required: true,\n    id: \"email\",\n    placeholder: \"Email\",\n    margin: \"normal\",\n    variant: \"filled\",\n    onChange: e => setEmail(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    required: true,\n    id: \"password\",\n    placeholder: \"Password\",\n    margin: \"normal\",\n    variant: \"filled\",\n    onChange: e => setPassword(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: classes.button,\n    onClick: () => history.push(\"/accesscode\", {\n      role: \"Coordinator\"\n    }),\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }\n  }, \"Submit\")))));\n}\n\nconst mapDispatchToProps = {\n  areaAction: setAreas\n};\nexport default connect(null, mapDispatchToProps)(AccessCodePage);","map":{"version":3,"sources":["/Users/alexrutledge/Documents/GitHub Local/cop4331-helpinghand/frontend/src/components/accesscodepage/acesscodepage.js"],"names":["React","useState","makeStyles","TaskCard","Grid","Appbar","Typography","TextField","Button","useLocation","axios","connect","setAreas","useHistory","useStyles","theme","root","marginTop","button","width","height","backgroundColor","color","AccessCodePage","props","classes","location","history","email","setEmail","password","setPassword","message","setMessage","handleSubmit","event","preventDefault","obj","js","JSON","stringify","console","log","state","role","options","method","headers","body","response","fetch","then","data","ok","Error","status","json","catch","e","id","user","firstName","lastName","localStorage","setItem","push","res","parse","text","window","href","alert","toString","get","areaAction","areas","error","target","value","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\"\nimport { makeStyles } from '@material-ui/core/styles';\nimport TaskCard from '../taskcard/taskcard.js'\nimport Grid from '@material-ui/core/Grid';\nimport Appbar from \"../appbar/appbar.js\";\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport { useLocation } from \"react-router-dom\";\nimport axios from 'axios';\nimport { connect } from \"react-redux\";\nimport { setAreas } from '../../redux/actions.js';\nimport { useHistory } from \"react-router-dom\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    marginTop: 40,\n  },\n  button: {\n    marginTop: '40px',\n    width: '110px',\n    height: '40px',\n    backgroundColor: \"#27AE60\",\n    color: '#FFFFFF'\n  },\n}));\n\nfunction AccessCodePage(props) {\n  const classes = useStyles();\n  const location = useLocation();\n  let history = useHistory();\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n\n  const handleSubmit = async event => \n  {\n    event.preventDefault();\n\n    var obj = {email: email, password: password};\n    var js = JSON.stringify(obj);\n\n    console.log(obj);\n\n    try \n    {\n      if (location.state.role == 'Coordinator')\n      {\n        \n        const options = {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: js,\n        };\n        let response = await fetch('http://localhost:3000/api/coordLogin', options)\n          .then(data => {\n            if (!data.ok) {\n              throw Error(data.status);\n            }\n            return data.json();\n          }).catch(e => {\n            console.log(e);\n          });\n        console.log(response);\n    \n        \n        \n        if (response.id == -1)\n        {\n          setMessage('Email/password combination is incorrect');\n        }\n        else\n        {\n          var user = {firstName: response.firstName, lastName: response.lastName, id: response.id};\n          localStorage.setItem('user_data', JSON.stringify(user));\n          setMessage('');\n          history.push('/coordinatorPage');\n        }\n      }\n      else\n      {\n        const response = fetch('http://localhost:3000/api/volLogin', \n          {method: 'POST', body: js, \n          headers: {'Content-Type':'application/json'}});\n\n        var res = JSON.parse(response.text());\n\n        if (res.id <= 0)\n        {\n          setMessage('Email/password combination is incorrect');\n        }\n        else\n        {\n          var user = {firstName: res.firstName, lastName: res.lastName, id: res.id};\n          localStorage.setItem('user_data', JSON.stringify(user));\n\n          setMessage('');\n          window.location.href = '/areas';\n        }\n      }\n      \n    }\n    catch (e)\n    {\n      alert(e.toString());\n      return;\n    }\n\n    axios.get('/event/' + location.state.role + \"/\" + email)\n      .then((response) => {\n        console.log(\"Reponse:\", response);\n        props.areaAction(response.data.areas);\n        history.push(\"/areas\");\n      })\n      .catch((error) => {\n        console.log(\"Get Event Error:\", error);\n      })\n  }\n\n  \n  \n    return (\n      <>\n        <Appbar title={location.state.role} />\n          <form onSubmit={handleSubmit}>\n          <Grid container\n                direction=\"column\"\n                justify=\"center\"\n                alignItems=\"center\"\n                className={classes.root}\n                spacing={4}\n          >\n            <Grid item>\n              <Typography variant=\"h4\" component=\"h3\" align=\"center\">\n                <strong>{location.state.role + \" Login\"}</strong>\n              </Typography>\n            </Grid>\n            <Grid item>\n              <TextField\n                required\n                id=\"email\"\n                placeholder={\"Email\"}\n                margin=\"normal\"\n                variant=\"filled\"\n                onChange={(e)=> setEmail(e.target.value)}\n               />\n            </Grid>\n            <Grid item>\n              <TextField\n                required\n                id=\"password\"\n                placeholder={\"Password\"}\n                margin=\"normal\"\n                variant=\"filled\"\n                onChange={(e)=> setPassword(e.target.value)}\n               />\n            </Grid>\n            <Grid>\n            <Button className={classes.button}\n              onClick={()=> history.push(\"/accesscode\", {role: \"Coordinator\"})}\n              type=\"submit\">\n              Submit\n\n            </Button>\n          \n            </Grid>\n          </Grid >\n          </form>\n      </>\n    )\n\n}\nconst mapDispatchToProps = { areaAction: setAreas }\n\n\nexport default connect(\n  null,\n  mapDispatchToProps\n)(AccessCodePage)\n"]},"metadata":{},"sourceType":"module"}